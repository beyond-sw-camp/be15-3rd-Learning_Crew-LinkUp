<script setup>
import { ref, computed } from 'vue';
import SidebarMainLayout from '@/components/layout/SidebarMainLayout.vue';
import SearchBar from '@/features/main/components/SearchBar.vue';
import CardList from '@/components/common/CardList.vue';

const searchText = ref('');
const cards = ref([
  {
    imageUrl: 'https://cdn.pixabay.com/photo/2023/06/08/13/31/balls-8049598_1280.jpg',
    date: '2025.04.23 (í™”)',
    title:
      'ìš”ì¦˜ê°™ì€ ì„ ì„ í•œ ë‚ ì— ì¶•êµ¬ í•œíŒ ì–´ë•Œìš”! ìš”ì¦˜ê°™ì€ ì„ ì„ í•œ ë‚ ì— ì¶•êµ¬ í•œíŒ ì–´ë•Œìš”! ìš”ì¦˜ê°™ì€ ì„ ì„ í•œ ë‚ ì— ì¶•êµ¬ í•œíŒ ì–´ë•Œìš”! ìš”ì¦˜ê°™ì€ ì„ ì„ í•œ ë‚ ì— ì¶•êµ¬ í•œíŒ ì–´ë•Œìš”!',
    location: 'ì„œìš¸ ë„ë´‰êµ¬ ë°©í•™ë¡œ 223',
    likeCount: 32,
    price: '20,000ì›',
  },
  {
    imageUrl: 'https://media.istockphoto.com/id/2002620668/ko/ì‚¬ì§„.jpg',
    date: 'ğŸ“… 2025.04.23 (í™”)',
    title: 'ëŸ¬ë‹í•œë²ˆ í•˜ì‹œì£ ~~!!',
    location: 'ğŸ“ì—¬ì˜ë„ ì´ëœë“œ í¬ë£¨ì¦ˆ ê·¼ì²˜',
    likeCount: 82,
    price: '5,000ì›',
  },
  {
    imageUrl: 'https://media.istockphoto.com/id/2002620668/ko/ì‚¬ì§„.jpg',
    date: 'ğŸ“… 2025.04.23 (í™”)',
    title: 'ëŸ¬ë‹í•œë²ˆ í•˜ì‹œì£ ~~!!',
    location: 'ğŸ“ì—¬ì˜ë„ ì´ëœë“œ í¬ë£¨ì¦ˆ ê·¼ì²˜',
    likeCount: 82,
    price: '5,000ì›',
  },
  {
    imageUrl: 'https://media.istockphoto.com/id/2002620668/ko/ì‚¬ì§„.jpg',
    date: 'ğŸ“… 2025.04.23 (í™”)',
    title: 'ëŸ¬ë‹í•œë²ˆ í•˜ì‹œì£ ~~!!',
    location: 'ğŸ“ì—¬ì˜ë„ ì´ëœë“œ í¬ë£¨ì¦ˆ ê·¼ì²˜',
    likeCount: 82,
    price: '5,000ì›',
  },
]);

const filteredCards = computed(() => {
  if (!searchText.value) return cards.value;
  return cards.value.filter(
    (card) => card.title.includes(searchText.value) || card.location.includes(searchText.value),
  );
});

const searchItems = [
  { icon: 'ğŸ‘¾', label: 'ì´ìƒì²œì™¸í•œ ìˆ™ì†Œ' },
  { icon: 'â­', label: 'ì»¬ì³ ì•„ì´ì½˜' },
  { icon: 'ğŸŒ²', label: 'êµ­ë¦½ê³µì›' },
  { icon: 'ğŸ°', label: 'ìºìŠ¬' },
  { icon: 'ğŸŒï¸â€â™‚ï¸', label: 'ê³¨í”„ì¥' },
  { icon: 'ğŸ›ï¸', label: 'ìœ ë¥´íŠ¸' },
  { icon: 'ğŸ¡', label: 'í•œì í•œ ì‹œê³¨' },
  { icon: 'ğŸ–¼ï¸', label: 'ìµœê³ ì˜ ì „ë§' },
];
</script>

<template>
  <SidebarMainLayout width="500px" sidebarClass="h-[calc(100vh-100px)]">
    <SearchBar :items="searchItems" />

    <template #sidebar>
      <section class="sidebar-content" aria-label="ëª¨ì„ ë¦¬ìŠ¤íŠ¸ ì˜ì—­">
        <CardList :items="filteredCards" />
      </section>
    </template>

    <template #main>
      <main class="map-area" aria-label="ì§€ë„ ì˜ì—­">
        <div class="map-placeholder">ì§€ë„ ì˜ì—­ì…ë‹ˆë‹¤.</div>
      </main>
    </template>
  </SidebarMainLayout>
</template>

<style scoped>
.sidebar-content {
  @apply relative flex flex-col gap-4 h-full pt-[80px]; /* SearchBar ë†’ì´ë§Œí¼ íŒ¨ë”© */
}

.map-area {
  @apply flex-1 h-full flex items-center justify-center;
}

.map-placeholder {
  @apply w-full h-full bg-gray-200 flex items-center justify-center;
}
</style>
